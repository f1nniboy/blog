{% extends "base.html" %}

{%- block main -%}
{%- filter indent -%}{%- filter indent -%}
{%- if section.content -%}
<header class="content {%- if section.extra.framed %} framed{%- endif -%}">
    {{ section.content | indent | safe }}
</header>
{% endif -%}

{#- Display partial content from "featured section", e.g. "/blog/". -#}
{#- Otherwise, render as a normal Zola homepage (only show posts under "/"). -#}
{%- if section.extra.section_path -%}
    {%- set blog_section = get_section(path=section.extra.section_path) -%}
    {%- set num_top_posts = section.extra.max_posts | default(value=blog_section.pages | length) -%}
    {%- if blog_section.paginate_reversed == true -%}
        {%- set top_posts = blog_section.pages | reverse | slice(end=num_top_posts) -%}
    {%- else -%}
        {%- set top_posts = blog_section.pages | slice(end=num_top_posts) -%}
    {%- endif -%}
{%- else -%}
    {%- set blog_section = section -%}
    {%- set top_posts = blog_section.pages -%}
{%- endif -%}

{% for page in paginator.pages | default(value=top_posts) -%}
{{ post_macros::excerpt(page=page) }}
{% endfor -%}

{% include "partials/pagination.html" %}
{%- endfilter -%}{%- endfilter -%}
{%- endblock -%}
